---
import PostLayout from '@/layouts/BlogPost.astro';
import { getAllPosts } from '@/utils';

const { slug } = Astro.params;

const allPost = await getAllPosts(true);

const entry = allPost.find((p) => p.slug === slug);

if (!entry) {
  return Astro.redirect('/404');
}

const { Content } = await entry.render();
---

<PostLayout post={entry}>
  <Content />
</PostLayout>
